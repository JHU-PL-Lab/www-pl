<!DOCTYPE HTML>
<!--
 Solarize by TEMPLATED
 templated.co @templatedco
 Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
 <head>
  <title>Principles of Programming Languages</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <!--[if lte IE 8]><script src="/pl/css/ie/html5shiv.js"></script><![endif]-->
  <script src="/pl/js/jquery.min.js"></script>
  <script src="/pl/js/jquery.dropotron.min.js"></script>
  <script src="/pl/js/skel.min.js"></script>
  <script src="/pl/js/skel-layers.min.js"></script>
  <script src="/pl/js/init.js"></script>
  <noscript>
   <link rel="stylesheet" href="/pl/css/skel.css" />
   <link rel="stylesheet" href="/pl/css/style.css" />
  </noscript>
  <!--[if lte IE 8]><link rel="stylesheet" href="/pl/css/ie/v8.css" /><![endif]-->
 </head>
 <body>

  <!-- Header Wrapper -->
   <div class="wrapper style1">
   
   <!-- Header -->
    <div id="header">
     <div class="container">
       
      <!-- Logo -->
       <h1><a href="/pl/index.html" id="logo">Principles of PL</a></h1>
      
      <!-- Nav -->
       <nav id="nav">
        <ul>
         <li class="active"><a href="/pl/index.html">Home</a></li>
         <li>
          <a href="/pl/logistics.html">Logistics</a>
          <ul class="menu">
           <li><a href="/pl/dateline.html">Dateline</a></li>
           <li><a href="https://gradescope.com">Gradescope</a></li>
           <li><a href="https://campuswire.com/c/G9E051068">Q&amp;A</a></li>
           <li><a href="/pl/contact.html">Contact Us</a></li>
          </ul>
         </li>
         <li><a href="/pl/book">The Book</a>
         <ul class="menu">
         <li><a href="/pl/book/book.pdf">The book PDF</a></li>
         <li><a href="/pl/book/dist/">The FbDK dist</a></li>
       </ul></li>

         <li><a href="/pl/ocaml/index.html">OCaml</a>
         </li>
         <li><a href="">Assignments</a>
         <ul class="menu">
         <li><a href="/pl/assignments/assignment1.html">Assignment 1</a></li>
         <li><a href="/pl/assignments/assignment2.html">Assignment 2</a></li>
         <li><a href="/pl/assignments/assignment3.html">Assignment 3</a></li>
         <li><a href="/pl/assignments/assignment4.html">Assignment 4</a></li>
         <li><a href="/pl/assignments/assignment5.html">Assignment 5</a></li>
         <li><a href="/pl/assignments/assignment6.html">Assignment 6</a></li>
         <li><a href="/pl/assignments/assignment7.html">Assignment 7</a></li>
         <li><a href="/pl/assignments/assignment8.html">Assignment 8</a></li>
         <li><a href="/pl/assignments/assignment9.html">Assignment 9</a></li>
       </ul></li>
        </ul>
       </nav>
 
     </div>
    </div>
<!-- close-out code before the standard footer .. use to glue in raw html. -->
</div>
<!-- Main -->
<div id="main" class="wrapper style4">
<!-- Content -->
<div id="content" class="container">
<section>

<link rel="stylesheet" href="/pl/css/friendly.css" />
<meta charset="utf-8" />
    <h2 id="assigment-7---actors">Assigment 7 - Actors</h2>

<p>For this assignment you will want to consult the book chapter 7 and the <a href="../ocaml/code/afbv_examples.ml"><code>afbv_examples.ml</code></a> file of <strong>AFbV</strong> examples we ran during lecture.  (Note that the actor debug flags did not work correctly on the FbDK until recently, so grab a fresh copy of the zip file to run the <strong>AFbV</strong> interpreter with debug information.  The examples file contains instructions on how to run <strong>AFbV</strong>.)</p>

<ol>
  <li>
    <p>(20 points) In the Actors lecture a simple example was used which included two actors and three messages.  After lecture I wrote out <strong>AFbV</strong> code for that example which is called <code>lecture_example</code> in <a href="../ocaml/code/afbv_examples.ml"><code>afbv_examples.ml</code></a>.  Unfortunately, the example I gave in lecture proved to be not exactly programmable in <strong>AFbV</strong> – it required actors <code>a1</code> and <code>a2</code> to each know about each other at the start, but this is something like mutual recursion: recall how in OCaml you cannot define mutual recursion without the special <code>.. and ..</code> syntax.</p>

    <p>So, the <code>lecture_example</code> is <em>nearly</em> the same as the example in class, but when <code>a1</code> receives its first message it <em>both</em> creates <code>a2</code> and sends it a message.</p>

    <p>a. Show the global progression of the actor system bootstrapped by <code>lecture_example</code> in the mathematical notation used in the book:  Give the <em>G0</em>-<em>G3</em> such that <em>G0 -&gt; G1 -&gt; G2 -&gt; G3</em> where each <em>Gi</em> is a global set of actors and messages.  Note you don’t need give the complete actor code in the set, you can write something like <code>&lt;a1,Fun msg -&gt; ... &gt;</code> where you can use  <code>...</code> instead of writing out all the code.<br />
Hint: if you load in the AFbV interpreter into <code>utop</code> and set <code>show_states := true;;</code> and run <code>peu lecture_example;;</code> the debug information is mostly the answer to this question, just put it in set form in the book’s notation.</p>
  </li>
  <li>
    <p>(10 points) For this question, again for the same example you are to elaborate on how the operational semantics rules works for when <code>a1</code> receives and processes the <code>a1 &lt;- `hi(7)</code> message – this is the step from <em>G0</em> to <em>G1</em>.  Concretely, give the details of this step in terms of what <code>e =S=&gt; v</code> is computed, giving the <code>e</code>, the <code>v</code>, and the <code>S</code>.  You don’t need to write out the whole proof tree, it is large.</p>
  </li>
  <li>
    <p>(25 points) One issue with actor messaging is it is <em>asynchronous</em> – there is no waiting for a reply.  So, if you in fact needed the answer before proceeding, you would instead operate under a protocol where the receiver would send a <code>`return(..)</code> message back to you which was “just another message”, and you would subsequently handle that.  And, in order for the receiving actor to know who to <code>`return</code> to, we must pass that actor name in the message itself; this name is called the “customer” in actor-speak.</p>

    <p>a. We first specify the behavior of a stack actor, and show how it is to be used.  Your job is then to define the stack actor behavior.</p>

    <p>The stack actor has a behavior (code) <code>stack_behavior</code> which is what you will need to write.  It needs to operate under the following protocol:</p>

    <ul>
      <li><code>Create(stack_behavior,...)</code> will create a new stack actor with an empty stack; the <code>...</code> can be anything, it is ignored.</li>
      <li>
        <p>If <code>as</code> was the result returned by the above <code>Create</code>, we can send it the following stack messages:</p>

        <p><code>as &lt;- push(a,v)</code> is customer <code>a</code> asking to push v on the <code>as</code> stack.  Note <code>(a,v)</code> is a pair which is legal syntax of <strong>AFbV</strong> (<code>Fst(e)</code> and <code>Snd(e)</code> access the first and second components).  The <code>as</code> should push value <code>v</code> on it’s internal stack, and reply <code>a &lt;- `return(..anything..)</code> – the customer needs to know the stack push is finished.</p>

        <p><code>as &lt;- is_empty(a)</code> will reply <code>a &lt;- True</code> to the customer <code>a</code> if the stack is empty, and <code>a &lt;- False</code> otherwise.</p>

        <p><code>as &lt;- pop(a)</code> will pop the top element <code>v</code> from its stack, and will return <code>`some(v)</code> if the stack was not empty, and <code>`none(0)</code> otherwise.</p>
      </li>
    </ul>

    <p>In order to make life easier for you, we have made a test harness which will push a few items on the stack and verify they come off.  See file <a href="assignment7-q3.ml"><code>assignment7-q3.ml</code></a> for this test.  You will also put your answer in the indicated spot in this file, and we will put up a separate code upload of this question for the autograder.</p>
  </li>
  <li>
    <p>(10 points) In the test harness code in the <a href="assignment7-q3.ml"><code>assignment7-q3.ml</code></a> file it awaited a reply before sending the next stack message.  Describe in terms of the actor system evolution why if we instead had the simpler test body below why this would not be an appropriate test.  You can use the <strong>AFbV</strong> interpreter to help you answer this question but your answer needs to be a <em>G0 -&gt; G1 -&gt; ..</em>  evolution as in question 1 above which will print “Fail”.</p>
  </li>
</ol>

<div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nc">Let</span> <span class="k">as</span> <span class="o">=</span> <span class="nc">Create</span><span class="p">(</span><span class="n">stack_behavior</span><span class="o">,</span><span class="mi">0</span><span class="p">)</span> <span class="nc">In</span>
    <span class="p">(</span><span class="k">as</span> <span class="o">&lt;-</span> <span class="nt">`push</span><span class="p">(</span><span class="mi">32</span><span class="o">,</span><span class="n">me</span><span class="p">));</span>
    <span class="p">(</span><span class="k">as</span> <span class="o">&lt;-</span> <span class="nt">`push</span><span class="p">(</span><span class="mi">22</span><span class="o">,</span><span class="n">me</span><span class="p">));</span>
    <span class="p">(</span><span class="k">as</span> <span class="o">&lt;-</span> <span class="nt">`pop</span><span class="p">(</span><span class="n">me</span><span class="p">));</span>
    <span class="p">(</span><span class="nc">Fun</span> <span class="n">msg</span> <span class="o">-&gt;</span> <span class="nc">Match</span> <span class="n">msg</span> <span class="nc">With</span>
           <span class="nt">`some</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nc">If</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">22</span> <span class="nc">Then</span> <span class="nc">Print</span> <span class="err">\</span><span class="s2">"Success</span><span class="se">\"</span><span class="s2"> Else Print </span><span class="se">\"</span><span class="s2">Fail</span><span class="se">\"</span><span class="s2">) In..
</span></code></pre></div></div>
      
          </section>
        </div>
      </div>

				<div id="copyright">
					Web Design: <a href="http://templated.co">TEMPLATED</a> Images: <a href="http://unsplash.com">Unsplash</a> (<a href="http://unsplash.com/cc0">CC0</a>)
				</div>			


   </body>
</html>
