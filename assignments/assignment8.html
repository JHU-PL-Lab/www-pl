<!DOCTYPE HTML>
<!--
 Solarize by TEMPLATED
 templated.co @templatedco
 Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
 <head>
  <title>Principles of Programming Languages</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <!--[if lte IE 8]><script src="/pl/css/ie/html5shiv.js"></script><![endif]-->
  <script src="/pl/js/jquery.min.js"></script>
  <script src="/pl/js/jquery.dropotron.min.js"></script>
  <script src="/pl/js/skel.min.js"></script>
  <script src="/pl/js/skel-layers.min.js"></script>
  <script src="/pl/js/init.js"></script>
  <noscript>
   <link rel="stylesheet" href="/pl/css/skel.css" />
   <link rel="stylesheet" href="/pl/css/style.css" />
  </noscript>
  <!--[if lte IE 8]><link rel="stylesheet" href="/pl/css/ie/v8.css" /><![endif]-->
 </head>
 <body>

  <!-- Header Wrapper -->
   <div class="wrapper style1">
   
   <!-- Header -->
    <div id="header">
     <div class="container">
       
      <!-- Logo -->
       <h1><a href="/pl/index.html" id="logo">Principles of PL</a></h1>
      
      <!-- Nav -->
       <nav id="nav">
        <ul>
         <li class="active"><a href="/pl/index.html">Home</a></li>
         <li>
          <a href="/pl/logistics.html">Logistics</a>
          <ul class="menu">
           <li><a href="/pl/dateline.html">Dateline</a></li>
           <li><a href="https://gradescope.com">Gradescope</a></li>
           <li><a href="https://campuswire.com/c/G9E051068">Q&amp;A</a></li>
           <li><a href="/pl/contact.html">Contact Us</a></li>
          </ul>
         </li>
         <li><a href="/pl/book">The Book</a>
         <ul class="menu">
         <li><a href="/pl/book/book.pdf">The book PDF</a></li>
         <li><a href="/pl/book/dist/">The FbDK dist</a></li>
       </ul></li>

         <li><a href="/pl/ocaml/index.html">OCaml</a>
         </li>
         <li><a href="">Assignments</a>
         <ul class="menu">
         <li><a href="/pl/assignments/assignment1.html">Assignment 1</a></li>
         <li><a href="/pl/assignments/assignment2.html">Assignment 2</a></li>
         <li><a href="/pl/assignments/assignment3.html">Assignment 3</a></li>
         <li><a href="/pl/assignments/assignment4.html">Assignment 4</a></li>
         <li><a href="/pl/assignments/assignment5.html">Assignment 5</a></li>
         <li><a href="/pl/assignments/assignment6.html">Assignment 6</a></li>
         <li><a href="/pl/assignments/assignment7.html">Assignment 7</a></li>
         <li><a href="/pl/assignments/assignment8.html">Assignment 8</a></li>
         <li><a href="/pl/assignments/assignment9.html">Assignment 9</a></li>
       </ul></li>
        </ul>
       </nav>
 
     </div>
    </div>
<!-- close-out code before the standard footer .. use to glue in raw html. -->
</div>
<!-- Main -->
<div id="main" class="wrapper style4">
<!-- Content -->
<div id="content" class="container">
<section>

<link rel="stylesheet" href="/pl/css/friendly.css" />
<meta charset="utf-8" />
    <h2 id="assigment-8---type-systems">Assigment 8 - Type Systems</h2>
<h2 id="draft--final-assignment-may-differ">DRAFT!  Final assignment may differ!!</h2>

<ol>
  <li>
    <p>(20 points) For each of these expressions, either construct a typing proof in <strong>TFb</strong> <strong>or</strong> show exactly why they cannot typecheck (i.e. no derivation tree could ever be built; don’t just informally describe it, use the formal system rules).</p>

    <p>a.  <code>If True Then 0 Else False</code></p>

    <p>b.  <code>(If True Then (Fun x:Int -&gt; x + 1) Else (Fun x:Int -&gt; x)) 0</code></p>

    <p>c.  <code>(Fun x:(Int -&gt; Int) -&gt; x False)</code></p>

    <p>d.  <code>(Fun x:Bool -&gt; Fun x:Int -&gt; x + 1)</code></p>
  </li>
  <li>
    <p>(25 points) Here we will extend <strong>FbV</strong> with types, <strong>TFbV</strong>. In this question you are just making a type system, not a type checker. Variant types are added to <strong>TFb</strong>’s types; they will be slightly different than OCaml syntax, they will be e.g. <code>`good(Int) | `bad(Bool)</code>.</p>

    <p>We also need to add some type labels to facilitate type checking, modifying slightly the <strong>TFbV</strong> syntax: replace <code>`n(e)</code> with <code>`n(e):τ</code> - all variant data is tagged with a variant type (we don’t have the <code>type</code> declarations of OCaml so we need to manually do this; this type also needs to include all potential variants since we have no subtyping here.). For example: <code>`good(0): `good(Int) | `bad(Bool)</code>.  (Yes this is a bit ugly.  But it is simple.)</p>

    <p>a.  Your task is to write the new type rules beyond those already present in <strong>TFb</strong> to make a full type system for <strong>TFbV</strong>. Note you don’t need to implement anything for this question. Please make your rule be strict – OCaml will sometimes give a warning if there is a case missing, you should not allow those programs to typecheck in your rule. (To model the warning we would need to include a warning flag in our type system.)</p>

    <p>b.  Show your rules work by proving the simple program</p>

    <div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Match</span> <span class="p">(</span><span class="nt">`good</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="nt">`good</span><span class="p">(</span><span class="nc">Int</span><span class="p">)</span> <span class="o">|</span> <span class="nt">`bad</span><span class="p">(</span><span class="nc">Bool</span><span class="p">))</span> <span class="nc">With</span> <span class="nt">`good</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">0</span> <span class="o">|</span> <span class="nt">`bad</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>
</code></pre></div>    </div>

    <p>typechecks: construct the type tree for it.</p>

    <p>c.  Describe why the same program but with the <code>`bad</code> case removed fails to typecheck in your rules (yes, it should fail even though that case is not invoked).</p>
  </li>
  <li>
    <p>(25 points)  This question concerns subtyping.</p>

    <p>a.  Type the following expression in <strong>STFbR</strong> (note this program is not showing the type declarations on <code>r1/r2</code>, you need figure those out):</p>

    <div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nc">Fun</span> <span class="n">n</span><span class="o">:</span><span class="nc">Int</span> <span class="o">-&gt;</span> <span class="nc">Fun</span> <span class="n">r1</span><span class="o">:</span><span class="p">{</span><span class="o">...</span><span class="p">}</span> <span class="o">-&gt;</span> <span class="nc">Fun</span> <span class="n">r2</span><span class="o">:</span><span class="p">{</span><span class="o">...</span><span class="p">}</span> <span class="o">-&gt;</span>
   <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="n">r1</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="nc">If</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="nc">Then</span> <span class="n">r1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span> <span class="nc">Else</span> <span class="n">r2</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="n">z</span> <span class="o">=</span>  <span class="n">r2</span><span class="o">.</span><span class="n">z</span> <span class="o">+</span> <span class="mi">2</span><span class="p">}</span>
</code></pre></div>    </div>

    <p>(you only need to give a legal type, not show the full type derivation)</p>

    <p>b.  Now write a nontrivial subtype of your answer to a) which changes as many of the record types as you can.  Along with writing the subtype, give the proof of subtyping using the subtype rules covered in lecture and in Section 6.5.2.</p>

    <p>c.  Like b) but make a supertype.  Also give the proof tree.</p>
  </li>
</ol>

      
          </section>
        </div>
      </div>

				<div id="copyright">
					Web Design: <a href="http://templated.co">TEMPLATED</a> Images: <a href="http://unsplash.com">Unsplash</a> (<a href="http://unsplash.com/cc0">CC0</a>)
				</div>			


   </body>
</html>
